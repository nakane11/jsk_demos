<launch>

  <arg name="ns" value="remote" />
  <arg name="camera_name" value="stereo" />
  <arg name="manager" value="/$(arg ns)/$(arg camera_name)/$(arg camera_name)_nodelet_manager" />

  <group ns="$(arg ns)" >
    <group ns="$(arg camera_name)">
      <node name="stereo_depth_estimation"
            pkg="stereo_image_sandbox" type="stereo_depth_estimation.py"
            output="screen" >
        <remap from="~left/image_rect" to="/$(arg ns)/$(arg camera_name)/left_camera/image_rect_color" />
        <remap from="~left/camera_info" to="/$(arg ns)/$(arg camera_name)/left_camera/camera_info" />
        <remap from="~right/image_rect" to="/$(arg ns)/$(arg camera_name)/right_camera/image_rect_color" />
        <remap from="~right/camera_info" to="/$(arg ns)/$(arg camera_name)/right_camera/camera_info" />
        <rosparam>
        </rosparam>
      </node>

      <node name="depth_to_points"
            pkg="nodelet" type="nodelet"
            args="load depth_image_proc/point_cloud_xyzrgb $(arg manager)">
        <param name="queue_size" value="100" />
        <remap from="rgb/camera_info" to="/$(arg ns)/$(arg camera_name)/left_camera/camera_info" />
        <remap from="rgb/image_rect_color" to="/$(arg ns)/$(arg camera_name)/left_camera/image_rect_color" />
        <remap from="depth_registered/image_rect" to="stereo_depth_estimation/output" />
        <remap from="depth_registered/points" to="/stereo/estimated_points" />
      </node>
    </group>
  </group>

</launch>
