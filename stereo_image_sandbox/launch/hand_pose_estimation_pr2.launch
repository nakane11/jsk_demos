<launch>

  <arg name="camera_name" default="kinect_head" />
  <arg name="rgb" default="rgb" />
  <arg name="gui" default="true" />
  <arg name="queue_size" default="10" />

  <group ns="$(arg camera_name)">
    <group ns="$(arg rgb)" >
      <node name="hand_pose_estimation"
            pkg="stereo_image_sandbox" type="hand_pose_estimation.py"
            respawn="true"
            clear_params="true"
            output="screen" >
        <remap from="~input" to="image_rect_color" />
        <rosparam subst_value="true" >
          enable_vital_check: false
        </rosparam>
      </node>
    </group>

    <node name="hand_skeleton_with_depth"
          pkg="stereo_image_sandbox" type="skeleton_with_depth.py"
          respawn="true"
          clear_params="true"
          output="screen" >
        <remap from="~input/info" to="/$(arg camera_name)/$(arg rgb)/camera_info" />
        <remap from="~input/skeleton" to="/$(arg camera_name)/$(arg rgb)/hand_pose_estimation/output/skeleton" />
        <remap from="~input/depth" to="/$(arg camera_name)/depth_registered/image_rect" />
        <rosparam subst_value="true" >
          queue_size: $(arg queue_size)
          enable_vital_check: false
        </rosparam>
    </node>
  </group>

  <group if="$(arg gui)" >
    <group ns="$(arg camera_name)" >
      <group ns="$(arg rgb)" >
        <group ns="hand_pose_estimation" >
          <node name="image_view"
                pkg="image_view" type="image_view"
                args="image:=output/viz" />
        </group>
      </group>
    </group>
  </group>

</launch>
